<div class='container'>
    <div class="row" *ngIf="errorDuringCall">
        <div class="col-md-12">
            <h3>Quiz Editor unavailable :)</h3>
        </div>
    </div>
    <div class="row" *ngIf="!errorDuringCall">
        <div class="col-md-4">
            <br>
            <button
                class="btn btn-outline-primary"
                (click)="addNewQuiz()">Add new quiz</button>
            <br>
            <br>
            <div class="list-group">
                <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                    *ngFor="let quiz of quizzes"
                    (click)="setSelectedQuiz(quiz)"
                    [class.active]="selectedQuiz == quiz"
                    [style.text-decoration]="quiz.pendingDelete ? 'line-through' : 'inherit'"
                >
                    {{ quiz.name }}
                    <span>{{ quiz.numberOfQuestions }} questions</span>
                </button>
            </div>
        </div>
        <div class="col-md-8">
            <div *ngIf="selectedQuiz">
                <br>
                <button
                    class="btn btn-outline-secondary"
                >
                    Save
                    <span
                        class="badge badge-danger"
                        *ngIf="numberOfPendingDeletions > 0"
                    >- {{ numberOfPendingDeletions }}</span>
                    <span
                        class="badge badge-light"
                        *ngIf="numberOfPendingUpdates > 0"
                    >+ {{ numberOfPendingUpdates }}</span>
                    <span
                        class="badge badge-success"
                        *ngIf="numberOfAddedQuizzes > 0"
                    >+ {{ numberOfAddedQuizzes }}</span>
                </button>
                <button class="btn btn-link">Cancel</button>
                <br>
                <br>
                <div class="card">
                    <div class="card-header">General</div>
                    <div class="card-body">
                        <span class="">Quiz name</span>
                        <input type="text" [(ngModel)]="selectedQuiz.name" class="form-control my-3">
                    </div>
                </div>
                <br>
                <div class="card">
                    <div class="card-header">Questions</div>
                    <div class="card-body">
                        <button
                            class="btn btn-outline-success"
                            (click)="addNewQuestion()">Add new question</button>
                        <br>
                        <br>                        
                    
                        <div class="input-group" *ngFor="let question of selectedQuiz.questions">
                            <input type="text"
                                [(ngModel)]="question.name"
                                class="form-control">
                            <span class="input-group-btn">
                                <button
                                    class="btn btn-outline-danger"
                                    (click)="removeQuestion(question)">Remove</button>
                            </span>
                            <br>
                            <br>
                        </div>
                    </div>
                </div>
                <br>
                <div class="card">
                    <div class="card-header">Options</div>
                    <div class="card-body">
                        <div class="form-check">
                            <label class="form-check-label text-danger">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    [(ngModel)]="selectedQuiz.pendingDelete"
                                >
                                Mark for delete
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="!selectedQuiz">
                <br>
                <br>
                <br>
                <br>
                <div class="card">
                    <div class="card-header">
                        <h3>Help</h3>
                    </div>
                    <div class="card-body">
                        <p>Select a quiz on the left or add a new quiz to get started...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>